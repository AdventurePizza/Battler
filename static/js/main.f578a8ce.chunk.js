(this.webpackJsonpbattlr=this.webpackJsonpbattlr||[]).push([[0],{165:function(t,n,e){},167:function(t,n,e){},171:function(t,n){},173:function(t,n){},184:function(t,n){},186:function(t,n){},213:function(t,n){},215:function(t,n){},216:function(t,n){},221:function(t,n){},223:function(t,n){},242:function(t,n){},254:function(t,n){},257:function(t,n){},288:function(t,n,e){"use strict";e.r(n);var r=e(3),a=e.n(r),s=e(48),i=e.n(s),c=(e(165),e(35)),u=e(19),o=e(0),l=e.n(o),p=(e(167),e(303)),f=e(14),d=e(91),b=e.n(d),h=e(26),y=new f.i({name:"Beacon Docs"}),j=new d.UnityContext({loaderUrl:"buildUnity/Build/buildUnity.loader.js",dataUrl:"buildUnity/Build/buildUnity.data",frameworkUrl:"buildUnity/Build/buildUnity.framework.js",codeUrl:"buildUnity/Build/buildUnity.wasm"});var m=function(){var t=Object(r.useState)(),n=Object(u.a)(t,2),e=n[0],a=n[1],s=Object(r.useState)("sync"),i=Object(u.a)(s,2),o=i[0],f=i[1],d=Object(r.useState)(!1),m=Object(u.a)(d,2),v=m[0],g=m[1];function k(t){return O.apply(this,arguments)}function O(){return(O=Object(c.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:j.send("GameManager","setCharacters",n);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(){return(w=Object(c.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.next=3,y.getActiveAccount();case 3:t.t1=t.sent,(0,t.t0)(t.t1),e&&y.clearActiveAccount().then(Object(c.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.next=3,y.getActiveAccount();case 3:t.t1=t.sent,(0,t.t0)(t.t1),f("sync"),g(!1);case 7:case"end":return t.stop()}}),t)}))));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function U(){return A.apply(this,arguments)}function A(){return(A=Object(c.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.next=3,y.getActiveAccount();case 3:if(t.t1=t.sent,(0,t.t0)(t.t1),!e){t.next=11;break}return f(e.address),g(!0),t.abrupt("return",e);case 11:return t.prev=11,console.log("Requesting permissions..."),t.next=15,y.requestPermissions();case 15:return n=t.sent,t.t2=a,t.next=19,y.getActiveAccount();case 19:t.t3=t.sent,(0,t.t2)(t.t3),console.log("Got permissions:",n.address),f(n.address),g(!0),t.next=29;break;case 26:t.prev=26,t.t4=t.catch(11),console.log("Got error:",t.t4);case 29:case"end":return t.stop()}}),t,null,[[11,26]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){function t(t,e,r){return n.apply(this,arguments)}function n(){return(n=Object(c.a)(l.a.mark((function t(n,e,r){var a,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.fxhash.xyz/graphql",{method:"POST",body:JSON.stringify({query:n,variables:r,operationName:e}),headers:{"Content-Type":"application/json"}});case 2:return a=t.sent,t.next=5,a.json();case 5:return s=t.sent,t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function r(){return(r=Object(c.a)(l.a.mark((function n(e){var r,a,s,i,c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(x,"Query",{id:e,skip:0,take:20,filters:{},sort:{id:"DESC"}});case 2:r=n.sent,a=r.errors,s=r.data,a&&console.error(a),console.log(s),i=s?s.user.objkts:null,c=(c=i.map((function(t){var n=t.issuer,e=t.metadata,r=t.assigned;return"tz2DNkXjYmJwtYceizo3LwNVrqfrguWoqmBE"===n.author.id&&r?e.attributes[0].value+"."+e.attributes[1].value+"."+e.attributes[2].value:null}))).join(),setTimeout(k,5e3,c);case 11:case"end":return n.stop()}}),n)})))).apply(this,arguments)}e&&function(t){r.apply(this,arguments)}(e.address)}),[e]),Object(r.useEffect)((function(){function t(){return(t=Object(c.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.next=3,y.getActiveAccount();case 3:t.t1=t.sent,(0,t.t0)(t.t1),e?(f(e.address.slice(0,6)+"..."+e.address.slice(32,36)),g(!0)):(f("sync"),g(!1));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),Object(h.jsxs)("div",{children:[Object(h.jsx)(b.a,{unityContext:j,style:{width:"100%",height:"100vh"}}),Object(h.jsxs)("div",{className:"top-right",style:{position:"absolute",display:"flex",alignItems:"center",backgroundColor:"white"},children:[v&&Object(h.jsxs)(p.a,{size:"small",title:"unsync",onClick:function(){!function(){w.apply(this,arguments)}()},children:[Object(h.jsx)("u",{children:"unsync"})," "]}),v&&Object(h.jsx)("div",{children:" | "}),Object(h.jsxs)(p.a,{title:"sync",size:"small",onClick:Object(c.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U();case 2:case"end":return t.stop()}}),t)}))),children:[Object(h.jsx)("u",{children:o})," "]})]})]})},x="\nquery Query($id: String!, $take: Int, $skip: Int, $sort: UserCollectionSortInput, $filters: ObjktFilter) {\n  user(id: $id) {\n    id\n    objkts(take: $take, skip: $skip, sort: $sort, filters: $filters) {\n      id\n      assigned\n      rarity\n      iteration\n      owner {\n        id\n        name\n        flag\n        avatarUri\n        __typename\n      }\n      issuer {\n        name\n        flag\n        author {\n          id\n          name\n          flag\n          avatarUri\n          __typename\n        }\n        __typename\n      }\n      name\n      metadata\n      createdAt\n      offer {\n        id\n        price\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n}\n",v=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,304)).then((function(n){var e=n.getCLS,r=n.getFID,a=n.getFCP,s=n.getLCP,i=n.getTTFB;e(t),r(t),a(t),s(t),i(t)}))};i.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(m,{})}),document.getElementById("root")),v()},94:function(t,n){}},[[288,1,2]]]);
//# sourceMappingURL=main.f578a8ce.chunk.js.map